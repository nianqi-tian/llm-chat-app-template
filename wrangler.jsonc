/**
 * For more details on how to configure Wrangler, refer to:
 * https://developers.cloudflare.com/workers/wrangler/configuration/
 *
 * Wrangler æ˜¯ Cloudflare Workers çš„å‘½ä»¤è¡Œå·¥å…·å’Œé…ç½®æ–‡ä»¶æ ¼å¼ã€‚
 * æ­¤æ–‡ä»¶å®šä¹‰äº† Worker çš„éƒ¨ç½²ã€æ„å»ºå’Œèµ„æºç»‘å®šã€‚
 */
{
    "$schema": "node_modules/wrangler/config-schema.json",
    // Worker çš„é¡¹ç›®åç§°ã€‚ç”¨äº Cloudflare Dashboard å’Œ CLI éƒ¨ç½²ã€‚
    "name": "llm-chat-app-template",
    // Worker è„šæœ¬çš„å…¥å£æ–‡ä»¶è·¯å¾„ã€‚
    "main": "src/index.ts",
    
    // Cloudflare Workers çš„å…¼å®¹æ€§æ—¥æœŸã€‚
    // ä½¿ç”¨è¾ƒæ–°çš„æ—¥æœŸå¯ä»¥å¯ç”¨æœ€æ–°çš„è¿è¡Œæ—¶è¡Œä¸ºå’ŒåŠŸèƒ½ã€‚
    "compatibility_date": "2025-10-08",
    
    // å…¼å®¹æ€§æ ‡å¿—ï¼Œç”¨äºå¯ç”¨ç‰¹å®šçš„è¿è¡Œæ—¶ç‰¹æ€§æˆ– polyfillã€‚
    "compatibility_flags": [
        "nodejs_compat", // å¯ç”¨ Node.js å…¼å®¹æ€§ API (ä¾‹å¦‚ `process` æˆ– `Buffer`)
        "global_fetch_strictly_public" // ç¡®ä¿å…¨å±€ `fetch` è¡Œä¸ºç¬¦åˆ Web æ ‡å‡†
    ],
    
    // é™æ€èµ„äº§é…ç½® (ç”¨äºæœåŠ¡å‰ç«¯ UI)
    "assets": {
        // åœ¨ Worker è„šæœ¬ä¸­è®¿é—®é™æ€èµ„äº§çš„ç»‘å®šåç§° (å¯¹åº”äº types.ts ä¸­çš„ ASSETS)
        "binding": "ASSETS", 
        // åŒ…å«å‰ç«¯æ–‡ä»¶çš„æœ¬åœ°ç›®å½•
        "directory": "./public"
    },
    
    // å¯è§‚æµ‹æ€§é…ç½®
    "observability": {
        // å¯ç”¨æ—¥å¿—è®°å½•å’ŒæŒ‡æ ‡æ”¶é›†ï¼Œæœ‰åŠ©äºè°ƒè¯•å’Œç›‘æ§ (å¯¹åº”äº P2 å¯è§‚æµ‹æ€§)
        "enabled": true
    },
    
    // Workers AI ç»‘å®šé…ç½®
    "ai": {
        // åœ¨ Worker è„šæœ¬ä¸­è®¿é—® Workers AI æœåŠ¡çš„ç»‘å®šåç§° (å¯¹åº”äº types.ts ä¸­çš„ AI)
        "binding": "AI" 
    },
    
    // å¯ç”¨ä¸Šä¼  Source Mapï¼Œä»¥ä¾¿äºåœ¨ Cloudflare ä»ªè¡¨æ¿ä¸­è°ƒè¯• Worker é”™è¯¯ã€‚
    "upload_source_maps": true,
    
    // ----------------------------------------------------------------------
    // ğŸš¨ ç¼ºå¤±çš„å…³é”®é…ç½® (ä¸ºå®ç° P0/P1 æ¸…å•åŠŸèƒ½ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹é…ç½®)ï¼š
    // ----------------------------------------------------------------------
    
    /*
    // 1. KV å­˜å‚¨ç»‘å®š (ç”¨äºå®ç° P0 å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†å’Œå¼‚æ­¥æ•°æ®æŒä¹…åŒ–)
    "kv_namespaces": [
        {
            "binding": "CHAT_CONTEXT_KV", 
            "id": "YOUR_KV_NAMESPACE_ID", // æ›¿æ¢ä¸ºä½ åˆ›å»ºçš„ KV Namespace ID
            "preview_id": "YOUR_PREVIEW_KV_NAMESPACE_ID" // å¼€å‘ç¯å¢ƒçš„ ID
        }
    ],
    
    // 2. ç¯å¢ƒå˜é‡ (Secrets) é…ç½® (ç”¨äºå­˜å‚¨æ•æ„Ÿé…ç½®ï¼Œå¦‚ LLM API Keyï¼Œå¦‚æœæœªä½¿ç”¨ Workers AI)
    // æ³¨æ„ï¼šWorkers AI ä½¿ç”¨ AI ç»‘å®šï¼Œä¸éœ€è¦å•ç‹¬çš„ API Keyã€‚ä½†å¦‚æœåˆ‡æ¢åˆ° OpenAI æˆ–å…¶ä»–æœåŠ¡ï¼Œåˆ™éœ€è¦ï¼š
    "vars": {
        "OPENAI_MODEL_NAME": "gpt-4o-mini",
        "DEFAULT_TEMPERATURE": "0.7"
    },
    // API å¯†é’¥åº”ä½œä¸º Secret å­˜å‚¨ï¼š
    // $ npx wrangler secret put OPENAI_API_KEY
    */
}